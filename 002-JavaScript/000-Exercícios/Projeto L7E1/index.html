<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form action="">
        <input type="number" id="idNota" placeholder="Nota" step="0.01">
        <br><br>
        <input type="button" value="Icluir" onclick="incluirNota()">
        <input type="button" value="Questao A" onclick="questaoA2()">
        <input type="button" value="Questao B" onclick="questaoB1()">
        <input type="button" value="Questao C" onclick="questaoC()">
        <input type="button" value="Questao D" onclick="questaoD()">
        <br><br>
        <output id="idOutA"></output><br>
        <output id="idOutB"></output><br>
        <output id="idOutC"></output><br>
        <output id="idOutD"></output>
    </form>

    <script>
        var notas = []

        function incluirNota() {
            notas.push(Number(document.getElementById("idNota").value))
            document.getElementById("idNota").value = ""
        }

        //Calcular a média da turma
        function questaoA() {
            let saida = document.getElementById("idOutA")
            let somaNotas = 0
            let media = 0

            notas.forEach(element => {
                somaNotas = somaNotas + element
            });

            media = somaNotas / notas.length

            saida.value = "Média da turma: " + media

        }

        function questaoA2() {
            console.log(notas);
            let saida = document.getElementById("idOutA")

            let media = (notas.reduce(function (acumulador, elemento, index, array) {
                return acumulador = acumulador + elemento
            }, 0)) / notas.length

            saida.value = "Média da turma: " + media

        }

        function questaoA3() {
            console.log(notas);
            let saida = document.getElementById("idOutA")

            let media = notas.reduce(function (acumulador, elemento, index, array) {
                if (index == (notas.length - 1)) {
                    acumulador = acumulador + elemento
                    return acumulador = acumulador / notas.length
                } else {
                    return acumulador = acumulador + elemento
                }
                //return acumulador = acumulador + elemento
            }, 0)


            saida.value = "Média da turma: " + media

        }

        //Alunos acima da média
        function questaoB1(params) {
            let saida = document.getElementById("idOutB")
            let taxa = 1/notas.length
            let media = 0
            let alunosAcimaMedia = []

            notas.forEach(element => {
                media = media + (element * taxa)
            });

            notas.forEach((element, index) => {
                if (element > media ) {
                    alunosAcimaMedia.push(index)
                }
            });

            saida.value = "Alunos acima da média: " + alunosAcimaMedia.toString()

        }

        function questaoB2() {
            let saida = document.getElementById("idOutB")
            let taxa = 1/notas.length
            console.log("QB taxa: " + taxa);

            let media = notas.reduce(function(acc, valAtual, index, array){
                return (acc + (valAtual * taxa))
            }, 0)

            console.log("QB Média: " + media);
            let alunosAcimaMedia = notas.map(function(value, index, array) {
                if (value > media) {
                    return index
                } 
            })
            console.log(alunosAcimaMedia);
            alunosAcimaMedia = alunosAcimaMedia.filter(function(value, index, array) {
                return value != undefined
            })
            
            saida.value = "Alunos acima da média: " + alunosAcimaMedia.toString()
        }

        //A maior nota 
        function questaoC() {
            let saida = document.getElementById("idOutC")
            let maior = 0

            notas.forEach(element => {
                if (element > maior) {
                    maior = element
                }
            });

            saida.value = "A Maior nota é: " + maior

            return maior
        }


        //Em que posições a maior nota aparece  
        function questaoD() {
            let saida = document.getElementById("idOutD")

            let maxNota = notas.reduce(function (acc, value) {
                return Math.max(acc, value)
            }, -Infinity)

            console.log("Maior Nota: " + maxNota)

            let indMaiorNota = notas.map(function (elemento, index) {
                if (elemento == maxNota) {
                    return index
                }
            })

            indMaiorNota = indMaiorNota.filter(function(value, index, array) {
                return value != undefined
            })

            console.log(indMaiorNota)
            saida.value = "A maior nota aparece nas posições: " + indMaiorNota.toString()

        }
            //---------------------------------
    </script>
</body>

</html>